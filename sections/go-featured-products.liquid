{%comment%}
{{ "go-wf.css" | asset_url | stylesheet_tag }}
<script src="{{ "go-jquery.js" | asset_url }}" defer></script>
<script src="{{ "go-wf.js" | asset_url }}" defer></script>
{% endcomment %}
<div class="go-section-featured-collection">
  <div class="go-featured-collection-container">
    <h2 class="go-h2-title">{{section.settings.header | escape}}</h2>
    <div id="w-node-_2b6bbb20-4399-9bfe-c426-be0e63bde3ae-1658e309" class="w-embed w-script">
      <style>
        @supports ( aspect-ratio:0.75) {
          .go-product-card-image-block{
            aspect-ratio:{{section.settings.image_aspect_ratio | divided_by: 100.0}};
          }
        }
      </style>

      <script>
        if(!CSS.supports("aspect-ratio:0.75")){

        console.log("run")
          addEventListener('resize', (event) => {
           gridRatio();
           console.log("resize")
          });


            window.addEventListener("load", function() {
        console.log("initial setup")

        gridRatio();
        });
        }

        function gridRatio() {
            const s = document.querySelector('.go-product-card-block');
          console.log(s)
          const h = s.offsetWidth
          console.log(h)

          const allElements = document.getElementsByClassName("go-product-card-image-block");
          for (var i = 0; i < allElements.length; i++){
            let el = allElements[i];
            console.log(el)
            el.style["height"] = (h * {{100.0 | divided_by: section.settings.image_aspect_ratio }}) + "px";
          }

        }
      </script>
    </div>
    <div class="go-featured-collection-grid">
      {%
        render 'go-card-product',
        card_product: section.settings.product_1
      %}

      {%
        render 'go-card-product',
        card_product: section.settings.product_2
      %}

      {%
        render 'go-card-product',
        card_product: section.settings.product_3
      %}

      {%
        render 'go-card-product',
        card_product: section.settings.product_4
      %}
    </div>
    <div class="go-featured-collection-button-block">
      <div class="go-hero-div-height">
        <a
          data-w-id="6e96d34c-4ec5-09a9-2623-8286097ff706"
          href="{{section.settings.url_1}}"
          class="go-button-black w-inline-block"
        >
          <div class="go-button-text">{{ section.settings.button_1_text }}</div>
          <div class="go-triangle-black w-embed"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 19.8 14.9" style="enable-background:new 0 0 19.8 14.9;" xml:space="preserve">
            <polygon class="go-triangle-black-svg" points="9.9,13 17.9,1 1.9,1 "></polygon>
            </svg></div>
        </a>
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "go-featured-products",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "text",
      "id": "header",
      "label": "Header text",
      "default": "Our new releases"
    },
    {
      "type": "range",
      "id": "image_aspect_ratio",
      "min": 50,
      "max": 100,
      "step": 5,
      "unit": "%",
      "label": "Image aspect ratio in % (width/height)",
      "default": 75
    },
    {
      "type": "product",
      "id": "product_1",
      "label": "First product"
    },
    {
      "type": "product",
      "id": "product_2",
      "label": "Second product"
    },
    {
      "type": "product",
      "id": "product_3",
      "label": "Third product"
    },
    {
      "type": "product",
      "id": "product_4",
      "label": "Fourth product"
    },
    {
      "type": "text",
      "id": "button_1_text",
      "label": "Button text",
      "default": "Button 1"
    },
    {
      "type": "url",
      "id": "url_1",
      "label": "Collection url"
    }
  ],
  "presets": [
    {
      "name": "go featured products"
    }
  ]
}
{% endschema %}
